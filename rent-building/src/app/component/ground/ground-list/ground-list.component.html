
<script src="ground-list.component.ts"></script><h1>Danh sách thông tin mặt bằng</h1>
<div class="search-hero">
  <input class="form-control mt-2" type="text" name="search" style="width: 50%" [(ngModel)]="searchText"
         autocomplete="off" placeholder="Tìm kiếm mặt bằng theo mã mặt bằng,loại mặt bằng,giá bán">
</div>
<div>
  <button type="button" class="btn btn-warning mr-3" (click)="checkAddNewGround()" >Thêm mới thông tin mặt bằng</button>
  <form [formGroup]="addGroundForm">
    <table class="table table-striped table-inverse table-responsive">
      <thead class="thead-inverse">
      <tr>
        <th>Số thứ tự</th>
        <th>Mã mặt bằng</th>
        <th>Loại mặt bằng</th>
        <th>Diện tích</th>
        <th>Trạng thái</th>
        <th>Giá bán</th>
        <th>Phí quản lý</th>
        <th>Khách hàng</th>
        <th colspan="2">Thao tác</th>

      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let i=index;let item of grounds|filter:searchText | paginate:{id:'listing_pagination',
                                                                            itemsPerPage:4,
                                                                            currentPage:page,
                                                                            totalItems:totalRec}">
        <td>{{i+1}}</td>
        <td *ngIf="!checkEdit || item.id!==flag">{{item.codeGround}}</td>
        <td *ngIf="checkEdit && item.id===flag">
          <input type="text" class="form-control" formControlName="codeGround" value="{{item.codeGround}}">
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('codeGround').hasError('required') && addGroundForm.get('codeGround').touched">
            Mã mặt bằng không được để trống.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('codeGround').hasError('minlength') && addGroundForm.get('codeGround').touched">
            Mã mặt bằng tối thiểu 2 ký tự.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('codeGround').hasError('maxlength') && addGroundForm.get('codeGround').touched">
            Mã mặt bằng tối đa 25 ký tự.
          </p>
        </td>
        <td *ngIf="!checkEdit || item.id!==flag">{{item.typeGround}}</td>
        <td *ngIf="checkEdit && item.id===flag">
          <input type="text" class="form-control" formControlName="typeGround" value="{{item.typeGround}}">
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('typeGround').hasError('required') && addGroundForm.get('typeGround').touched">
            Loại mặt bằng không được để trống.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('typeGround').hasError('minlength') && addGroundForm.get('typeGround').touched">
            Loại mặt bằng tối thiểu 2 ký tự.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('typeGround').hasError('maxlength') && addGroundForm.get('typeGround').touched">
            Loại mặt bằng tối đa 25 ký tự.
          </p>
        </td>
        <td *ngIf="!checkEdit || item.id!==flag">{{item.area}}</td>
        <td *ngIf="checkEdit && item.id===flag">
          <input type="text" class="form-control" formControlName="area" value="{{item.area}}">
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('area').hasError('required') && addGroundForm.get('area').touched">
            Diện tích không được để trống.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('area').hasError('maxlength') && addGroundForm.get('area').touched">
            Diện tích tối đa 15 số.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('area').hasError('pattern') && addGroundForm.get('area').touched">
            Diện tích phải nhập đúng định dạng.
          </p>
        </td>
        <td *ngIf="!checkEdit || item.id!==flag"><button  class="btn btn-success" (click)="checkEditGround(item.id)">Sửa</button></td>
        <td *ngIf="!checkEdit || item.id!==flag"><button  class="btn btn-danger" (click)="openDialogDelete(item.id)">Xóa</button></td>
        <td *ngIf="checkEdit && item.id===flag">
          <button class="btn btn-primary" type="button" (click)="editGround()" style="margin-right: 10px">Lưu</button>
        </td>
        <td *ngIf="checkEdit && item.id===flag">
          <button class="btn btn-danger" type="button" (click)="close()" style="margin-right: 10px">Hủy</button>
        </td>
      </tr>
      <!--    thêm mới-->
      <tr *ngIf="checkAdd">
        <td></td>
        <td>
          <input type="text" class="form-control" formControlName="codeGround">
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('codeGround').hasError('required') && addGroundForm.get('codeGround').touched">
            Mã mặt bằng không được để trống.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('codeGround').hasError('minlength') && addGroundForm.get('codeGround').touched">
            Mã mặt bằng tối thiểu 2 ký tự.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('codeGround').hasError('maxlength') && addGroundForm.get('codeGround').touched">
            Mã mặt bằng tối đa 25 ký tự.
          </p>
        </td>
        <td>
          <input type="text" class="form-control" formControlName="typeGround">
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('typeGround').hasError('required') && addGroundForm.get('typeGround').touched">
            Loại mặt bằng không được để trống.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('typeGround').hasError('minlength') && addGroundForm.get('typeGround').touched">
            Loại mặt bằng tối thiểu 2 ký tự.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('typeGround').hasError('maxlength') && addGroundForm.get('typeGround').touched">
            Loại mặt bằng tối đa 25 ký tự.
          </p>
        </td>
        <td>
          <input type="text" class="form-control" formControlName="area">
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('area').hasError('required') && addGroundForm.get('area').touched">
            Diện tích không được để trống.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('area').hasError('maxlength') && addGroundForm.get('area').touched">
            Diện tích tối đa 15 số.
          </p>
          <p class="alert alert-danger" role="alert" *ngIf="addGroundForm.get('area').hasError('pattern') && addGroundForm.get('area').touched">
            Diện tích phải nhập đúng định dạng.
          </p>
        </td>
        <td colspan="2">
          <button class="btn btn-primary" type="button" (click)="addNewGround()" [disabled]="addGroundForm.invalid">Thêm mới</button>
        </td>
      </tr>
      </tbody>
    </table>
  </form>
  <div>
    <pagination-controls  id="listing_pagination" maxSize="5" directionLinks="true" (pageChange)="page = $event"
                          previousLabel="Trang trước" nextLabel="Trang sau"></pagination-controls>
  </div>
</div>





